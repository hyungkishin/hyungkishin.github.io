{"componentChunkName":"component---src-templates-post-jsx","path":"/phase2/","result":{"data":{"site":{"siteMetadata":{"title":"hyungkishin.blog"}},"markdownRemark":{"id":"b647b419-d924-52b4-99f0-91273c90cdeb","excerpt":"🏗️ AMP 페이지 개발 AMP(Accelerated Mobile Pages)는 빠른 모바일 페이지 로딩을 위해 구글이 주도한 프레임워크로, 강력한 성능을 얻는 대신 엄격한 제약을 동반한다. Next.js에서도 AMP를 적용하려면 이 제약을 그대로 수용해야 하며, 페이지 구조, 스타일링, JS 사용 방식 등에서 별도의 대응이 필요하다. Next.js에서 A…","html":"<h2>🏗️ AMP 페이지 개발</h2>\n<p>AMP(Accelerated Mobile Pages)는 빠른 모바일 페이지 로딩을 위해 구글이 주도한 프레임워크로,<br>\n<strong>강력한 성능을 얻는 대신 엄격한 제약</strong>을 동반한다.</p>\n<p>Next.js에서도 AMP를 적용하려면 이 제약을 그대로 수용해야 하며,<br>\n<strong>페이지 구조, 스타일링, JS 사용 방식 등에서 별도의 대응이 필요하다.</strong></p>\n<p>Next.js에서 AMP를 적용할 때도 이러한 제한이 그대로 적용된다.  </p>\n<h2>⚠️ AMP에서 제한되는 항목</h2>\n<p>AMP는 일반적인 React 환경과 달리 다음과 같은 제한이 있다:</p>\n<p>☝️. <strong>React Hook 사용 제한</strong>  </p>\n<ul>\n<li><code class=\"language-text\">useEffect</code>, <code class=\"language-text\">useState</code> 등 hook 기반 로직 사용 불가</li>\n</ul>\n<p>✌️. <strong>Sass/SCSS 등 외부 스타일 방식 제한</strong>  </p>\n<ul>\n<li>모든 스타일은 inline 또는 제한된 CSS 내에서 처리해야 함</li>\n</ul>\n<p>🫰. <strong>일반 script 태그 사용 불가</strong>  </p>\n<ul>\n<li><code class=\"language-text\">&lt;script></code> 태그 자체를 금지하며, JS는 <code class=\"language-text\">amp-script</code>로 제한적으로만 허용됨</li>\n</ul>\n<blockquote>\n<p>전체 AMP 검증은 <a href=\"https://validator.ampproject.org/\">AMP Validator</a> 를 통해 실시간 확인 가능</p>\n</blockquote>\n<h2>🗂️ 디렉팅 구조 전략</h2>\n<p>pages 디렉토리 를 기반으로 amp 디렉토리를 생성하고, 하위에 slug 페이지를 작성한다.</p>\n<blockquote>\n<p>🔖 slug 란 ?</p>\n<ul>\n<li>ex ) /news/2025/04/17/기사제목</li>\n<li>URL의 일부를 사람이 읽기 좋고 검색엔진 친화적으로 만든 문자열</li>\n</ul>\n</blockquote>\n<p>middleware.ts 에서 /amp 로 시작하는 URL을 감지하여, 해당 페이지를 AMP 페이지로 리다이렉트 하도록 설정.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 363px; '>\n      <a class='gatsby-resp-image-link' href='/static/2a116434e1b7aa72d000971ee8d1627a/6ddef/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 133.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEJUlEQVR42pWVS09bZxCG89eqLrqpom66SdVVpS76Gyq1TStVqhRFTRVl0RCCS4gJuRRogDgOBhtjwA6+YGPw/X73AV/O1cfnic4HipImIc5iFkcaPWfeb96ZuWTpfca6gqFpMDaxDAVrJIOlwUjG0gefFJcYG+QPfRy4fiIRWkJqZBmetKiXs5y2a2AMPxGISTTwGDl4hYr7MvnYIn6vj8Un80RCOwJoqj3GWn9C4EihW88R8j1gc22abjOHrMuYpsZI7YkkTEWENUG1l+w/g4HUbVMqFmikD4neuMqBa4lOKYUhn9BrV+l1ahjKCejDCYCmQruWZ9P3Ave8A+X7L2ld+YzMk3/w+Df58/o1pqf/plJIi1xT7X8cKDUrlAopBu0q4cXHHK8s0sociqqkZplet87Ylj7WLpR+BhyrdJsljuJRSpl9DjZ+J33ootvIMJCaNCpZuo0ypdwx2VQcpdcRzRprFwA7jSJbvk3W15y0PF+RWf6cuH+KLZ+fW7f+wnl/lvv3Z5l33iOdjAH6e6W/LbmUQZU7JMNucnE3rXJSSLR/KMLSGeuDCy10XqFCt1kmc5ygno8Rf/4rmegqp80c2VSC7FGMfDpBMXskPPnxLgvJJbybHjzPHtD0fk3Z9cWZ5K0ADscUd+9O8WjBiTboXjg970hWhh2C/mXSsXPJpi1ZF50dT2zsc8l2lyuZMGnPLySDD5HqKaL7e2x51xkpp5ON3puSt/0+/J5/kQLf0PFd5njvrpA8M3Obk1b19VxPNClSq0KpnEVTJcKB/8gmNpDqaextBNZZty1drLWJK4xHQsSjL7k97eDZs+cUcykqhRSRUIBkfJ/Y/i5H8TCmcgrGB4BimxhD1H6HYjbJ6soyf1y7zo8/X+Xp02VCwW0W5mdxzNxhxnGH1adLIveDFb75YW8dVT5hb2cL78YL0ahKIYuh6Qx7XUxDBcZgGVim+nGg/eD2G0lSk0Q8ymHYQ871HRH3b5RSftJHCTbW1/B71ylkkjAavjM1bwHtYRerrF4kuBtgz79KZ/cHTgLfkgo52fYHcK0t8eihk3gkKICmatupfwHw3JN5e/eNVSIHUUKxKP1OFSwTyxqdSR4pIhchvf8a+j/gmcltC+1seei0aswnajjjVTRtiMe9wtycA9faMn7vC5YXH+PbcDMWN+fs7rwHqArgy70tlNMWvkyVjXQZVe6RSoTxep4TeblDvZwjebBPIZMAU8a+TZYxeD/Q9mTGfnRGxKoNDqpN0Pt0GyWUfgddlpB7bQZSA23QoV0r0Kzm0YfS20BhnZGM3OuwH/RTLGSYDhdENNoNZh1T3JtzsLayxMMFJ/POWW7evCGW7sKDOXa3ve8CRRhDRmqfsXpKst4iUWsJS9kX0BhKohK7MlPro/TajPS+uD12ha8AWZvKk/aSTj4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img.png' title='' src='/static/2a116434e1b7aa72d000971ee8d1627a/6ddef/img.png' srcset='/static/2a116434e1b7aa72d000971ee8d1627a/e7570/img.png 170w,\n/static/2a116434e1b7aa72d000971ee8d1627a/f46e7/img.png 340w,\n/static/2a116434e1b7aa72d000971ee8d1627a/6ddef/img.png 363w' sizes='(max-width: 363px) 100vw, 363px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img.png</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">/src\n<span class=\"token operator\">|</span>── components                     \n    ├── amp                        👈 amp 페이지 내 공통컴포넌트 <span class=\"token punctuation\">(</span> Header, Body, Footer 등 재사용 컴포넌트들 쭉쭉 넣어주고 ~ <span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span><span class=\"token punctuation\">..</span>. 원래 있던 친구들 \n├── pages\n│   ├── amp                        👈 AMP 페이지 전용 디렉토리\n│   │   └── <span class=\"token punctuation\">[</span>slug<span class=\"token punctuation\">]</span>.tsx             👈 section 카테고리별 디렉토리\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>     └── <span class=\"token punctuation\">[</span>depth1<span class=\"token punctuation\">]</span>.tsx         👈 amp depth <span class=\"token number\">1</span> 본문 페이지\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>         └── <span class=\"token punctuation\">[</span>depth2<span class=\"token punctuation\">]</span>.tsx     👈 amp depth <span class=\"token number\">2</span> 본문 페이지\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>             └── <span class=\"token punctuation\">[</span>depth3<span class=\"token punctuation\">]</span>.tsx 👈 amp depth <span class=\"token number\">3</span> 본문 페이지</code></pre></div>\n<p>이렇게 되면 사실상 <strong>사용자 관점</strong> 에서 보이는 기사 뷰 페이지는 2벌이다.</p>\n<ul>\n<li>일반 페이지 ( PC / MO ) </li>\n<li>AMP 페이지 ( depth 별 )</li>\n</ul>\n<p>기존 기사 본문 URL 구조는 <strong>slug url</strong> 형식으로 되어있으니 amp 페이지로 유입될 경우 본문에 해당되는 amp 페이지로 redirect 해주면 된다\npages 만 UI 뼈대를 만든 후 공통화 컴포넌트화 시키면 되겠다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 335px; '>\n      <a class='gatsby-resp-image-link' href='/static/1287d9388ab92c89f022c3e02880814b/56823/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 175.8823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD9ElEQVR42p1WyVLbShTlv9nm7cirpFiwY42zp4phQZwKYGMDnmRJZigwnohnG4MtWzqvzm213HJI4ryuOmVZ6j6699xJG+PRGMlkEuVyGZZlRSgUCsjlcmuBe09PTzEajbDRaXdgWWV0u10hvbm5geO6GAyG4PJ9H74fIJBfH4FcBwgChcViIfts20ar1cJGt6sIJ5MJarUams0mGo2G/A8AzOdz+ItFSKwIfU3K65DQcRw8Pz+TsItSqRRZoxffvvpf3QsJVy2MEVqW3BRrtCVBAM/zkM/n8fT0hHq9LlYD6xCGFvKhcsmnSfBmHr4kvuDT50/Y2trChw//RERaR03o2CFhp9NFqRgSzheRqxqvr6/o9/to//ghB7Tbf7DQijSMLDBgrtVnWucYIfOIazqdYuZ58LwZZjMPs9kswnQ6w2yq7vO5gidnuKyypQh73R729/dxe3srech8+hvwDM8eHR2h3W4rCxlJPjw/P0cmk1kb2WwWZ2dnkoNEk4nd7w+QTqflTW9vb5hMXiUQ64D7WW40yHHCSukPBjhPpaXktOi/CoIOmrkYZZGqbCsNmRKpVAqVSoWpF9Uufyl6vFpgpFUQJv9cmgklE8LBYBARLpuBIjk8PMReYg97ewkkEgrJb99iKcbq+okwnUrBfYeQG6+vr3FwcIDd3V3s7Owge3mpXNXluUrYDy10XRd+mPlCyjIMfGlbXHSfQVBkCyH0A1/ykoWh2peh4a+C8qdFA5jUMcKLTAZXV1fSUdgL6/UQcq3v1dV1+F/QbOLx8REXFxk4jqsIO52OaMDN1KtYLP4ElqaGeZ9dimdIzqBKHirCsgjK+WCVSrJRg65QDpYXddZEBA3hGZ4lYbPZUu2rWHy/Y3OxxE5OTgR0b1VnfW3bDlrSD7tdedN4PMZjtaq0qtVRqymtWK8k+/79VKzjzOHs0ZpWq1U565oalm0bvV5PiOmWhuM6uL+/F8seHh5wd3cnTcDcwzMMbKQhiSgsC5wWmLOZoFaUpGjopsEapoY8X3Ery+bAPOQspoYsJeYWMV/MJaE5GnjffKbBBktD4rWcTqNSuZE5HI0Bf1kl8dGqu05YQXNPsmRZelG3cWMDitd8O6M8HAwlQHRJE5qjVrlvqyhrl6nBsn2pSTYaDrG5uYmP/34UbG9v4+XlJSw5X/abhLH2xYgpl40xuvClITAtOOQbjaYQwGi2Zj+UtJH2JRpWlMtht1kYbcz8NIkh8OVj4LcN9v90G7avyGXmYT6XR6FYwGU2G33zXUt+KeTeu87lJHcZNDYNGvRslh4X9TKH+zrQTZcVJBoOhyMcHx/LW5jx6361msjnC/ia/ArK9x8E3SgaPi2VVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='기사 본문 상단 구조' title='' src='/static/1287d9388ab92c89f022c3e02880814b/56823/img_1.png' srcset='/static/1287d9388ab92c89f022c3e02880814b/e7570/img_1.png 170w,\n/static/1287d9388ab92c89f022c3e02880814b/56823/img_1.png 335w' sizes='(max-width: 335px) 100vw, 335px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>기사 본문 상단 구조</figcaption>\n  </figure></p>\n<p>( 그외 푸터 등등 모두 동일 ) </p>\n<blockquote>\n<p>AMP는 제약은 많지만, 뉴스 도메인에선 여전히 유의미하다</p>\n<p>React hook이나 script 사용은 어렵지만 기본 콘텐츠 위주 뉴스 페이지엔 큰 무리는 없다</p>\n<p>middleware.ts + slug 기반으로 AMP 라우팅 처리하면 깔끔하게 대응 가능</p>\n<p>AMP 페이지는 별도로 구성하되, 디자인/구조는 최대한 기존과 일치시키는 전략이 효과적이다</p>\n</blockquote>\n<h2>끝인줄 알았는데 등장하는 style 제약</h2>\n<p>AMP에서 사용하는 스타일은 용량에 명확한 제한이 있다:</p>\n<ul>\n<li><code class=\"language-text\">&lt;style amp-custom></code> 태그에는 <strong>최대 50KB까지만</strong> CSS 작성 가능</li>\n<li>인라인 스타일 (<code class=\"language-text\">style=\"...\"</code>)도 포함되므로 실제 여유는 더 적을 수 있다</li>\n<li>애니메이션 전용으로 허용된 <code class=\"language-text\">&lt;style amp-keyframes></code>는 <strong>최대 500KB까지</strong> 허용되지만,\n이는 <code class=\"language-text\">&lt;body></code> 하단에만 위치할 수 있고, 오직 키프레임 규칙만 작성 가능하다</li>\n</ul>\n<p>👉 실무에서는 <strong>총 CSS + 인라인 스타일 합산이 75KB를 넘지 않도록</strong> 주의해야 한다 - <a href=\"https://amp.dev/documentation/guides-and-tutorials/learn/spec/amphtml\"> 관련 공식문서 </a></p>","frontmatter":{"title":"🏗️ AMP 페이지 개발","date":"April 17, 2025","update":"April 17, 2024","tags":["front-end","performance"],"series":null},"fields":{"slug":"/phase2/","readingTime":{"minutes":2.16}}},"seriesList":{"edges":[{"node":{"id":"4cc639f4-37bf-5401-b7b8-4c5d3e23c5b6","fields":{"slug":"/deploy-strategy/"},"frontmatter":{"title":"배포전략"}}},{"node":{"id":"00662a55-abc5-525f-a35e-90e2a4567225","fields":{"slug":"/kotlin/"},"frontmatter":{"title":"코틀린의 현재와 미래"}}},{"node":{"id":"49cee026-4707-58a8-9c2e-b2ee65c4f1c3","fields":{"slug":"/cpu-bound-vs-io-bound/"},"frontmatter":{"title":"CPU Bound 와 IO Bound"}}},{"node":{"id":"7d6614c0-6b90-566a-8a4e-8e4be0749cc9","fields":{"slug":"/basic/"},"frontmatter":{"title":"Redis"}}},{"node":{"id":"edee6afa-bced-5993-86ff-512b48f22028","fields":{"slug":"/rag/"},"frontmatter":{"title":"Rag"}}},{"node":{"id":"4fdc4c80-b3ef-568f-98a9-6d6f7d14f737","fields":{"slug":"/spring-ai/"},"frontmatter":{"title":"Ai. Spring AI 로 때워도 되나유? 1편"}}},{"node":{"id":"374806d1-d43a-5f19-98e2-0d71c8cf7750","fields":{"slug":"/docker-deploy/"},"frontmatter":{"title":"AMP"}}},{"node":{"id":"b647b419-d924-52b4-99f0-91273c90cdeb","fields":{"slug":"/phase2/"},"frontmatter":{"title":"🏗️ AMP 페이지 개발"}}},{"node":{"id":"cb547d96-bb64-5e7e-86d7-b52051bfd56d","fields":{"slug":"/phase1/"},"frontmatter":{"title":"🗞️ 한 달간의 뉴스 사이트 프론트 성능 최적화✨"}}}]},"previous":{"fields":{"slug":"/docker-deploy/"},"frontmatter":{"title":"AMP"}},"next":{"fields":{"slug":"/phase1/"},"frontmatter":{"title":"🗞️ 한 달간의 뉴스 사이트 프론트 성능 최적화✨"}}},"pageContext":{"id":"b647b419-d924-52b4-99f0-91273c90cdeb","series":null,"previousPostId":"374806d1-d43a-5f19-98e2-0d71c8cf7750","nextPostId":"cb547d96-bb64-5e7e-86d7-b52051bfd56d"}},"staticQueryHashes":[],"slicesMap":{}}