{"componentChunkName":"component---src-templates-post-jsx","path":"/round1/","result":{"data":{"site":{"siteMetadata":{"title":"hyungkishin.blog"}},"markdownRemark":{"id":"6022f7d0-915e-52af-8a3d-869d94532557","excerpt":"배경 처음엔 제공된 구조를 그대로 신뢰했지만, E2E 테스트를 진행하며, 인프라가 자동으로 기동되는 문제를 발견했다. 테스트 실행 제어권이 모듈 경계를 넘어선다는 느낌을 받았고, ai 에게 설정을 명시적으로 로딩하도록 수정을 요청했다. 제공된 testFixtures 설정은 다음과 같다. @Configuration과 companion object init을…","html":"<h2>배경</h2>\n<p>처음엔 제공된 구조를 그대로 신뢰했지만,<br>\nE2E 테스트를 진행하며, 인프라가 자동으로 기동되는 문제를 발견했다.</p>\n<p>테스트 실행 제어권이 모듈 경계를 넘어선다는 느낌을 받았고,<br>\nai 에게 설정을 명시적으로 로딩하도록 수정을 요청했다.</p>\n<p>제공된 testFixtures 설정은 다음과 같다.</p>\n<p>@Configuration과 companion object init을 사용하여,<br>\n테스트 실행 시 자동으로 컨테이너를 기동하도록 구성하도록.</p>\n<p>그러나 이방식이 테스트 인프라의 제어권을 잃게 만들고,<br>\n명시적 의존성 선언 원칙에 어긋난다고 생각했다.</p>\n<p>@TestConfiguration + @Import 방식으로 변경해<br>\n필요한 테스트에서만 컨테이너를 기동하도록 구조를 개선하려 했으나.</p>\n<blockquote>\n<p>점차 뭣이 중헌지를 잃고 미아가 되고 있었다.<br>\n즉, 컨텍스트 미아.</p>\n</blockquote>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/fb58ad25591b43eff313d96509792d6d/a84ca/image.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADNklEQVR42kWTyW9bVRSH/S8wqJQNWwQhFQTUYQEsCG0qJaVNUVoqOiWKHAhRCjIuqgOkgxvASWlI3JpEjofEz/EQz7Gf3/OQ2HULQiokgkoIFiwq0QWqBBsEXXyc+6KKxU/nvnPP/c7v3Ktni6cCzHomuBaeJ5ZfopgPkc+HLeVknc0G0XWNmelLHDiwn66uTuxD/fj9X1KSvNrP5aROVCxFsSUiXpZfa8fXvYuI5rMOr+YXKRYWKQhUL2mEgtM8/8IOntj+JM+0PUvHix10d+9navI8xeKS1D2sFWC2sEQyHSazMm+5KwnAUjHCqkDrtSTH3nqDPR3PcWjvy+x7ZSev7umgvb2N3bt34fF8gmnGLKCqt5XLyxiS0M24jLAsiqJLTuV1WReLGieP9vCVs5/I5RG8LjvDR7vYtu1xHnnsUXq692JIrTKgprEZhgBFZRVlwzRiVlQ5U5rkZRyv24HXeZor7x/HPXyEsYFDdO5s46Wnn+LY24epVROWkbIYsplGHCXl0hCYghjmVs4sy3clQTV6Ff3qhyTcI+SnPiA9OYr2cT/vvfk60dicdS3WpHLeVjET1iElo/L/WuUrCipRT/oIOgcIuwaJuu0kJ97lzJFOPJ+P0VjPyETS2EhYZmzV6gpKlWoSU6Ri9aGU02oKQ14+etGOdn6Q2OUhtPHTeMZHqdQz0jQmzeNUlAmRrV5PUa1tqaLgVkwJKEO9UaC5luB2wUVorI+A6xSRC3bC44OUF0a51ZTrkbq19bzAVmRkcbgmQAWtqbimlKbVTPDDNyE2zAt8GznFTd8+gucO4x3pI3TuBF7HcfTpg9xrnWXT/JTb9SlajSSbG40t4LpAlNS4JSPNRiPIjytD3JrvpXH9IMZMD0W/g0oiQMp7iWxwhu+SZ7jfGOaX1EnuRHu59/3X/PH7z9huNHMWrHWjQFSb5ouLvfhnT3Dts07mvG7S8SUWg3OEQgHyq7pMU2M5Fie0cJ3F0Dw5bYp/bw7w4Lckf96/i620qtFsZC1l0vJfpnyUC37KUSd62EV2YRxt1ok242Bu8ix3ftqkJS/vm3iHwJWPKC04uJvv469fM/zz4G/+A1194/bqoZl6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='내가 뭐 하고 있었냐면..' title='' src='/static/fb58ad25591b43eff313d96509792d6d/ca1dc/image.png' srcset='/static/fb58ad25591b43eff313d96509792d6d/e7570/image.png 170w,\n/static/fb58ad25591b43eff313d96509792d6d/f46e7/image.png 340w,\n/static/fb58ad25591b43eff313d96509792d6d/ca1dc/image.png 680w,\n/static/fb58ad25591b43eff313d96509792d6d/a84ca/image.png 907w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>내가 뭐 하고 있었냐면..</figcaption>\n  </figure></p>\n<h2>환경 문제를 코드 문제로 오해했다.</h2>\n<p>시작은 단순한 E2E 테스트 실패,</p>\n<p>회원가입 E2E 테스트를 실행했는데 다음과 같은 에러가 발생했다.</p>\n<p><code class=\"language-text\">Could not find a valid Docker environment</code></p>\n<p>Testcontainers가 Docker에 연결하지 못한다는 메시지였다.<br>\n그런데 이상한 점이 있었다.</p>\n<p><code class=\"language-text\">curl --unix-socket /var/run/docker.sock http://localhost/info</code></p>\n<p>이 명령은 정상적으로 응답을 반환했다.<br>\nDocker CLI도 문제없이 동작했다.</p>\n<blockquote>\n<p>Docker는 정상인데, Testcontainers만 실패한다?<br>\n이 지점에서 나는 <code class=\"language-text\">관성적으로</code> “코드 문제” 인가...?</p>\n</blockquote>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 653px; '>\n      <a class='gatsby-resp-image-link' href='/static/5c53c5f1d565283d322ed551672bc7d8/ffe7f/image-1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 58.235294117647065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACyElEQVR42iWSyW4UZxSFyz3UPE9df3VXuXoy7WBs0yBwnLYwIBnaBtuJQCBhJyhSREQWUcg2jxAp6yyzTV4juzzUl+ticVTzV+fcc7WmDDk/PeJi/RVpURAXJdmoJlZDfnz3kvNnRxysHrK9s2C2GDOsSqIsxY1C7CAQhXhJRlio9jttXAZcngnw+SFpOWRQN+T1poBH/Pz+a85OjuTFEfN5Q7WpKFRBIsAojQUct1AnFGgckymFNq0CXl0cc/jgDmVTU03H7Z/yeswHcfjpp2+ZbG+Li4QkTxioVKApQeSJfPwowBMFaUI2HKHN6pCX6xXj8Y3linIyJa82icThu9dr/vzjNy4vT2nGpTjxUKXEi326uk7P0HF8Dz+OCFMZQ5ygbdUxBwe75IMYJTA1m1NO53hZwXdX5/z37z/88vE9z+/P2duqSNMQ13fomgIUmY7dAk3XlWsDbVL6NJMRaR6IuwnFZMZQFKkRr795xt9//c7Vi8dcHe9xd1YSRi5pFgjIxLCtFqhbJl3j8w+0pnCJxV2SeQxnU0aLBbUolXKOH33Jx+/f8ODOjMuHC5rcQ3d0SRMxKCKcwG5jd41+C+yafWlZOQJMWmBYKqKqYSCRfVWxWh1ycXbcjuTpcouRiojzSEpJpGW/BXTNXhu/b1kYjotWFzZhHstQXVRTicubGW6RScu7yyVPH61Y7u9LKTWpJOlbfSxP4or6lkHf1tHtm+NnaWVqSeUBbmBy64tN7t7fYb5zm8XePnvLe9yW81QS5MMCVZdYviklOO3R8GRuTo++Y0h8F90VYBoaGL4t9B5+4pMNMrIsIxFIJvsWSlk3Hy0P73H9wzW3dheyj+JU7m1YG3TMjqyLKyvlsGFuoBlOl54lEmDH6sgCe/LQxA4tTi/WvL1+w5OTxzxZn/Dh10/k4wmGa7bvdpwOTuy1cN2VWTod/geJDEN1Yva3/wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='아니야...' title='' src='/static/5c53c5f1d565283d322ed551672bc7d8/ffe7f/image-1.png' srcset='/static/5c53c5f1d565283d322ed551672bc7d8/e7570/image-1.png 170w,\n/static/5c53c5f1d565283d322ed551672bc7d8/f46e7/image-1.png 340w,\n/static/5c53c5f1d565283d322ed551672bc7d8/ffe7f/image-1.png 653w' sizes='(max-width: 653px) 100vw, 653px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>아니야...</figcaption>\n  </figure></p>\n<hr>\n<h2>문제의 범위</h2>\n<p>처음에는 아래와 부분을 의심했다.</p>\n<ul>\n<li>Testcontainers 설정 문제</li>\n<li><code class=\"language-text\">@Configuration</code> eager initialization</li>\n<li><code class=\"language-text\">System.setProperty</code> 타이밍</li>\n<li>의존성 충돌</li>\n</ul>\n<p>그래서 멍하니, 운전대를 클선생에게 맡겨버렸다.<br>\n클선생은 아래와 같은 수정을 시도했다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">@Configuration</code> -> <code class=\"language-text\">@TestConfiguration</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">companion object eager start()</code> -> <code class=\"language-text\">by lazy</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">System.setProperty</code> 제거</p>\n</li>\n<li>\n<p><code class=\"language-text\">@Container + @DynamicPropertySource</code> 전환</p>\n</li>\n<li>\n<p>docker-java 버전 강제 업그레이드</p>\n</li>\n<li>\n<p>Testcontainers 버전 변경</p>\n</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 574px; '>\n      <a class='gatsby-resp-image-link' href='/static/d28ae1cb17ddf332fb2305e914722841/312c2/image-2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVR42jWS22oTURSGJ3M+ZSYzmaQ5txlb2yY2adpqEaxStCfBA1GxFWtBqYgoVRFFKaJYVDyAN16J4L0P4SP4SJ8rsV4sBtbe/zf/Xv9STFfF9R10XUVVlWEZlkGxXGZEqpAEhxVTHxsjF0XYrotm6mQGGkNDt3UMR8e0TZQB0Mu62J6JLQe+b+F6NkHgEAskPdKkUsozUkqYne1QrZZwHAfLMglzWcLQH0Ib1Ty5wEWxXA0364hLm6xAo8gnG/jEORfL0Yb98Ykm7ZkpttZOMZ8WyScRI4WY2U6L9ZUl0YSEYsK2rEOgiNysuBJ3uZxHIH+tlmIatQKFfEAUh5xeWuTR1VXqeY8kCfE9l3Zrgr17W9y4tsH1/hr9C+dQbNcYAj0BhofAUmWEejVhcqJO2mxQLkZUywlznWl5roXtGDiew9KpBfaf3WPv/jZ3dq5wa/OiOBwcupZckBnKE2NxND/XEXeJwKr05mboTY8zWi4SxDGegAb3dZlbGGap1Sqsry3z6uVj9h7elVAsHUvSGYRj2gq5vE9XZtOoFcWtj+vanDnRZfPyOo20SZo2qFaKEqCFaYrOsjnW6fLh/Vs+fXqPohkZDFsTmDZcnyjJM9Nts3xmURJ3aLUn6S72aLWOcPtmn+9fX5OO1shkFHHqDIGVxhhfPh7w88c3lMxg97QMmqbKLurSUBht1lmY7w6/l5dPsL9xkkKU5d2bZ/z5/Yv+xlmKEpphaWRUlUB2c3d3h6dPHoheAP9LVTMoisLU1CSrq2eZP94jLYY8TyNOd6V3foXPBy/YvbNNb6GLIyHq5j/NsfZRtrcu8RdjzRLCoWJoCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='아니야 아니야..' title='' src='/static/d28ae1cb17ddf332fb2305e914722841/312c2/image-2.png' srcset='/static/d28ae1cb17ddf332fb2305e914722841/e7570/image-2.png 170w,\n/static/d28ae1cb17ddf332fb2305e914722841/f46e7/image-2.png 340w,\n/static/d28ae1cb17ddf332fb2305e914722841/312c2/image-2.png 574w' sizes='(max-width: 574px) 100vw, 574px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>아니야 아니야..</figcaption>\n  </figure></p>\n<p>결과는 충격적이게도</p>\n<blockquote>\n<p>변경된 파일 : 22 files changed.<br>\n현재시각 : AM 5시</p>\n</blockquote>\n<p>이 시점에서 깨달았다.</p>\n<blockquote>\n<p>“조졌구나. 문제를 해결하고 있는 게 아니라, 문제를 키우고 있구나.”</p>\n</blockquote>\n<hr>\n<h2>환경 문제 vs 코드 문제</h2>\n<p>진짜 원인은 Docker Desktop 의 버전 문제.</p>\n<ul>\n<li>Docker Desktop 29.1.2</li>\n<li>Engine API 1.52</li>\n<li>docker-java 3.4.x</li>\n</ul>\n<p>Testcontainers는 내부적으로 <code class=\"language-text\">/info</code> API를 호출해 Docker 환경을 검증한다.</p>\n<p>그리고 CLI는 정상 동작했지만, docker-java는 API negotiation 과정에서 유효한 응답으로 판단하지 못했다.</p>\n<blockquote>\n<p>CLI 정상 != 라이브러리 정상</p>\n</blockquote>\n<h2>믿어 BOM을 ..</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; '>\n      <a class='gatsby-resp-image-link' href='/static/a41a873e87158ec9ffce7fef4934de67/ce661/image-5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 46.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVR42j1SSW4bQQycm6b3fWRZwhjGRIlPueQU52YYif2H/P8blSJHyoEAm0uxiuwppAAfPHwMao5+rgXL6YS2DMY8zusFz9cvOD2eUFtD7QOpNjxvG15/vep7PDC3HDEJiA0Oxjs4+m10HB+OGEtDKRHGzvjz8Y7Pz98ovaN1xltFqRWXpyccL2eElBjj8Fwxzd4SzCpoyhF9VPRe0BqLijC2eHm54u/HT3z/tmpzoqpckio5OPaSSKIfcsEkYCK7tExWHWM0lWkZz5nsvcG6nvH24yu2c4VLkezSTdVOZnYGnvFAm0qlQwAXHYMekSxFapA3LXLY3RrZ11aUgAw0BLJUkHJGKpn5gSllr7JmNyuboHKiNogvuUpGC8FkJTJUaxnXHNezXTcs3LvIngyTO5hVRiL3LtlRlsgQxoONOSf+iL0uMbbXOu4y7z3cJ3dodJIAKMgNWAYVFlZeVRhLjbzXx0UPErlfYStMD/awy6dNdxABNjdQScoOKw8lO3W3ASK5Mdb4pbIcRnvMfzXS9w8khdZWI0/qSwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='아직도 정신못차리는거냐구@@@' title='' src='/static/a41a873e87158ec9ffce7fef4934de67/ce661/image-5.png' srcset='/static/a41a873e87158ec9ffce7fef4934de67/e7570/image-5.png 170w,\n/static/a41a873e87158ec9ffce7fef4934de67/f46e7/image-5.png 340w,\n/static/a41a873e87158ec9ffce7fef4934de67/ce661/image-5.png 626w' sizes='(max-width: 626px) 100vw, 626px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>아직도 정신못차리는거냐구@@@</figcaption>\n  </figure></p>\n<p>아직도 정신 못차리고, docker-java를 수동으로 업그레이드했다.</p>\n<p><code class=\"language-text\">testImplementation(\"com.github.docker-java:docker-java-api:3.5.1\")</code></p>\n<p>Spring Boot는 BOM으로 의존성을 관리한다.<br>\n하위 라이브러리를 수동 override하면 의존성 트리가 깨질 수 있다.</p>\n<blockquote>\n<p>BOM이 관리하는 버전을 신뢰하자.</p>\n</blockquote>\n<h2>Testcontainers는 “한 방식”만 써야 한다</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 471px; '>\n      <a class='gatsby-resp-image-link' href='/static/e032ce9a7fc8202e4d06827016e76594/27c0d/image-3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 61.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAADZUlEQVR42g2SWVOTBxiF80t60zodO8UBrQgFpghYCFJIwiYJiwmLDURICklIRAgRCWGLhVh2CY0QUZBURXAolaVFRUFcRmXHDkMAC5X2qldPv4sz5+555z3niGwXz3G7sYgZVxnTPRXc6G1k4+11tlbG2d+dZ2ezn+0/n7O/vc7LuWEU0pP0tVTwbN7L7DMvu7637O2s8Ne24L4lRCadnDJTHqVGDRWVxdQ7rLxf8vC373c++NbYXBtjf2ee//5d4emTu/QZkunOj8OilnLZlsP60iT/7L3h4MNj9n0TiHIzxORmxaKQx6LKScJgyGVjtZ+Pe084+Ojj3cIDrtXn0ucspLepiIVmDaPmdNKCDmPQyTjY8LK9eIvNVy7eP29FFC8OITE+jERJBJK4CNSqeJZeuNgS3p2ZGUYpCyI18ku0OWLqCsQMmxRYJSfQJIcx0GHgsdeGt93ESJeBAacW0alvAkiICSbmVJCgE2SmROCsz8darkZ5OpjokC/QqmLR5ksxywKplh1H9a0fdWVnWH3awty9WsY8Vh7dqeFarRrR4UOfcPTIZ/j7HcL/yOfERBwjKyWYQkkgPo+ZLn0SClk46XHHMQjA/KQQ9Oo4irLC6apT8oe3iu21IWbHm7lqVSIyaxLR5yVgKpCh/15KzYVMVPII8qL82fWUM1WZhSTMj/SYoyRHB2DUplFuyEApHGwwp7A8183irIuHAzW8fuhE9OJ+HcuTP7E4eZX1R21sLXTTXn0OjTiQHlUUzeknCQ/4lIRwf9SZMWiUpylRRlOWHclEv4W95UF2V4d4M9PJ9JAd0fQvjcx4G5jureD1qINXv/5IxwUFLp2ENoOManU0cnEAhfJQSrOjMAkgveJrbgutv5tu5+XoFRYeNDHituJu1CGautXAmDDq3itGXA4TPXXncRhTGWkzMuQspssip7wwFYsmAct5CTlJYUJ+sfw22Mg9jw23s5SbHeWM37Bx312FaKKviql+O3ZzphC2lOzEUIrPRnJJK0OdEY++UEmJTs1Fsw7pd2LOpkkoKyngkklYgu4Mpep4LCVyhq/bufuzAHTbi7jZZOZOZyUOfSKa1FCUcV/Rak6l05bLZaEkufgYnbU5tDhKsBvTcNvy8LaaGHSauF7/A51V+XiajHTbi/gfQ4hpHNkgBRkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='주인. 여기서 자면 끝나는거야 :)' title='' src='/static/e032ce9a7fc8202e4d06827016e76594/27c0d/image-3.png' srcset='/static/e032ce9a7fc8202e4d06827016e76594/e7570/image-3.png 170w,\n/static/e032ce9a7fc8202e4d06827016e76594/f46e7/image-3.png 340w,\n/static/e032ce9a7fc8202e4d06827016e76594/27c0d/image-3.png 471w' sizes='(max-width: 471px) 100vw, 471px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>주인. 여기서 자면 끝나는거야 :)</figcaption>\n  </figure></p>\n<p>우리 <code class=\"language-text\">(빈사 상태의 나, 클 선생)</code> 는 이제 이 지경 까지 갔다.</p>\n<ul>\n<li><code class=\"language-text\">@TestConfiguration</code></li>\n<li><code class=\"language-text\">@Container</code></li>\n<li><code class=\"language-text\">System.setProperty</code></li>\n<li><code class=\"language-text\">withReuse(true)</code></li>\n<li>testFixtures 방식</li>\n</ul>\n<p>좋은 취지 인것은 알겠다.<br>\n하지만 좀더 복잡한 문제로 가고 있었다.</p>\n<p>Testcontainers는 패턴을 단일화해야 한다.</p>\n<p><code class=\"language-text\">@Container + @DynamicPropertySource</code> 조합만 써야되나 ..?</p>\n<blockquote>\n<p>이윽고, 새별 6시경 롤백을 강행했다.</p>\n</blockquote>\n<hr>\n<h2>가장 큰 배움인, AI를 멈추는 타이밍</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/4f942581eec24576185a0d2d3b850272/663f3/image-4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 62.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADE0lEQVR42h2TWXPiVhCFhZAAsWkBSUiCAWEW22CDDdjBGIPtGsbb2HG8TVI1k5rEeZl5yEP+f31peDile+/Dp+4+pxXbtXBDj4yZJZlSqcQRWs4gnVYZ1UtcbnvsRUVqtkEntBl0q7heHj2bQUkoqIZDIqGKEiiKguJXI+J2E89zqPglBqMBqp7Czmlc7Hhc71S436/xeRDxerLDfy+f6Mb+BqhqCdR8QCKZFAlsDZ3MT9jr73Ixm/L2/MjXlwfymQy7kcXdQZWnw4jfhjVu9+U7bvBzNeZk0JGODDJZlaRVQ0/rck6ipQR4tDjFcUwC3yeMIo7rFXaDIpf9iLG0vOPlGNdMAVakypBvyz6Pn2Z0+y1yORWtFJPOpTEtbXNX2v2eHDKUHBvTtDhquNzs+Vz3Q05qDm07z9C3OG04uIZOWNBZzUfMFhMKRY1UeYts0cBzc1hmCmV7v0dWTCiVBWhbNEOXu2HIy0HA91GD5+2Q3wcfeNj/wHHgsOpU+Dg7ZLE8liKkbQEWpP2gkpe7GFVvNaVCAZYceXCwnBLD2OO2V2ZRt1lUSzz3qnwR+Krl8bIXcTbe5/L8iKBcEGCTopUjDPKUXQPlw1ZMxkhhWUVRQWZh0okcztomp1tF7vcqHEts+uUsy9iReTq06jWWiyNqgU2qEJIz18ACrptFqdSqm/wkxfq1VFUln07xse/yNHF5HZX5sYi52fU5b9t4phjgWJycTfD9AppeIG1kcEoGtp0WoORQ1cV+XdvA1vCiofF2GvP3MuZ9VuNP0VfRWbcsjuqMjodM5xOKAk+ohuRRIyO5XcdICRs12YrUJvWJddKTGluRzT+XMf9edbnr+8xbFjdDl7OeT6UWsLqa88v0QPK3LkAnqekoqmyNtgbGDZlbkbxZoLXbpTed0GpXWbQcLqSiaWwzb7ssdxwOtys0t9ucLqe8/3zn17dHrh5uOJ5PCeRHm9ULOk16R0PG5zMmFzOaB32yvkNDTBhFJodhYRPsVd+j3awQdWL8esTN8z1//Xjn+umWL9//4PXbm0BD/gcrPmO8ltkntAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='아 ㅈ...진정해봐봐...' title='' src='/static/4f942581eec24576185a0d2d3b850272/663f3/image-4.png' srcset='/static/4f942581eec24576185a0d2d3b850272/e7570/image-4.png 170w,\n/static/4f942581eec24576185a0d2d3b850272/f46e7/image-4.png 340w,\n/static/4f942581eec24576185a0d2d3b850272/663f3/image-4.png 650w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>아 ㅈ...진정해봐봐...</figcaption>\n  </figure></p>\n<p>허무하게도, 조금만 플래닝을 다르게 설정하면.<br>\nDocker DeskTop 버전 문제임을 빠르게 알 수 있었고.</p>\n<p>DownGrade (.28 version) 를 진행하니 무슨 문제였는지 기억조차 흐려질 정도로 빠르게 해결되었다.</p>\n<p>그리고, AI는 가능한 모든 해결책을 시도한다는 것을 알았다.<br>\n심지어 점점 더 많은 파일을 수정한다.</p>\n<p>다 박살 내놓고, 원한다면 흐름도 설명해준단다.</p>\n<p>개발자의 역할중, 판단과 플래닝이 부족해서 생긴 일이다.</p>\n<p>아니면, 아래의 예시처럼 \"과잉\" 이다 싶을때.</p>\n<p><code class=\"language-text\">“이 수정은 과한가?”</code><br>\n<code class=\"language-text\">“문제의 범위를 벗어나고 있지 않은가?”</code>.</p>\n<p>위 질문을 던지고 멈추는 것이 더 중요했다.</p>\n<p>결국 이번 경험에서 잘못된 플래닝은 다음과 같다.</p>\n<ol>\n<li>환경 확인 (<code class=\"language-text\">docker info</code>)</li>\n<li>네트워크/소켓 직접 테스트</li>\n<li>라이브러리 버전 확인</li>\n<li>그 다음에 코드 수정</li>\n</ol>\n<p>나는 4번부터 시작했다.</p>\n<p>잘못된 플래닝으로 부터 시작해서<br>\nAi 에게 가스라이팅 을 할게 아니라,<br>\n올바른 판단을 할 수 있도록 이끌어야 한다.</p>\n<p><code class=\"language-text\">그렇지 않으면, 파급력을 감당 할 수 없게 된다.</code>.</p>\n<blockquote>\n<p>플래닝을 1번부터 출발하게끔 통제 할것.<br>\n<code class=\"language-text\">의도와 달리 모호한 답변</code> 이 나오지 않고, <code class=\"language-text\">의도대로 조율</code> 하게 된다면.</p>\n<p>통제 성공의 객관적인 지표가 될것이다.</p>\n</blockquote>\n<hr>\n<h2>결론</h2>\n<p>Docker 버전 이슈 문제가 아니라,<br>\n현대의 개발 시장에서, AI와 협업하며 겪을 수 있는 다양한 이슈를 동시에 경험한 케이스였다.</p>\n<ul>\n<li>Spring 초기화 순서</li>\n<li>Testcontainers 공식 패턴</li>\n<li>Docker API negotiation</li>\n<li>BOM 의존성 관리</li>\n<li>환경 문제 vs 코드 문제 구분</li>\n<li>AI 통제 능력</li>\n</ul>\n<blockquote>\n<p><strong>TL;DR</strong><br>\nDocker 연결 실패처럼 보였던 문제는 코드가 아니라 환경(API negotiation) 이슈였다.<br>\n이 과정을 통해 Spring 초기화 순서, Testcontainers 공식 패턴, BOM 의존성 관리</p>\n<p>그리고 “AI를 멈추는 판단”의 중요성을 배웠다.</p>\n</blockquote>\n<hr>\n<h3>다음에는</h3>\n<ul>\n<li>Integration과 E2E를 어떻게 구조적으로 분리할 것인가?</li>\n<li>Testcontainers 공통 베이스를 만들 것인가?</li>\n<li>CI 환경에서 Docker 전략은 어떻게 가져갈 것인가?</li>\n</ul>\n<p>를 시간이 될때, 정리해보고 싶다.</p>","frontmatter":{"title":"컨텍스트 미아가 되어 버렸어요.","date":"February 05, 2026","update":"February 05, 2026","tags":["loopers","technical-writing"],"series":null},"fields":{"slug":"/round1/"}},"seriesList":{"edges":[{"node":{"id":"157bc344-b416-5386-96b5-c8abcaaa04b1","fields":{"slug":"/deploy-strategy/"},"frontmatter":{"title":"배포전략"}}},{"node":{"id":"9ffe9bc1-affb-594e-835e-411f3a793a5a","fields":{"slug":"/cpu-bound-vs-io-bound/"},"frontmatter":{"title":"CPU Bound 와 IO Bound"}}},{"node":{"id":"57b20240-e6eb-5935-8501-3e6c67e74117","fields":{"slug":"/basic/"},"frontmatter":{"title":"코틀린의 현재와 미래"}}},{"node":{"id":"bb741bf1-7c1e-5b80-bb1a-14792a626e7f","fields":{"slug":"/coroutine/"},"frontmatter":{"title":"코 루틴"}}},{"node":{"id":"27dbdca2-3881-5505-8ab7-9ec45927fa02","fields":{"slug":"/basic/"},"frontmatter":{"title":"Redis"}}},{"node":{"id":"438d9589-dd16-5ed8-b45b-9f4a98acf02a","fields":{"slug":"/rag/"},"frontmatter":{"title":"Rag"}}},{"node":{"id":"949c21ae-8526-56ae-9f82-e1e9f517b13e","fields":{"slug":"/spring-ai/"},"frontmatter":{"title":"Ai. Spring AI 로 때워도 되나유? 1편"}}},{"node":{"id":"b9a90cce-fcd6-53ba-aa91-ef1e39152b15","fields":{"slug":"/phase1/"},"frontmatter":{"title":"🗞️ 한 달간의 뉴스 사이트 프론트 성능 최적화✨"}}},{"node":{"id":"1e90878c-3b63-5ee1-82dd-7c84ca638419","fields":{"slug":"/phase2/"},"frontmatter":{"title":"🏗️ AMP 페이지 개발"}}},{"node":{"id":"03510f8b-e65c-56a0-a96c-bc3935cc4600","fields":{"slug":"/phase3/"},"frontmatter":{"title":"퍼포먼스 최적화 를 향해 - 1부"}}},{"node":{"id":"720fdeea-fb60-5df7-a27a-47eba40a7300","fields":{"slug":"/phase4/"},"frontmatter":{"title":"퍼포먼스 최적화 를 향해 - 2부"}}},{"node":{"id":"50b5fb3c-da1f-5275-9401-02e0413fdf4e","fields":{"slug":"/resume/"},"frontmatter":{"title":"이력서"}}},{"node":{"id":"3c1cc0a1-e646-5b0c-a212-7785bb4bb6e6","fields":{"slug":"/architecture/"},"frontmatter":{"title":"설계의 본질"}}},{"node":{"id":"6022f7d0-915e-52af-8a3d-869d94532557","fields":{"slug":"/round1/"},"frontmatter":{"title":"컨텍스트 미아가 되어 버렸어요."}}}]},"previous":{"fields":{"slug":"/architecture/"},"frontmatter":{"title":"설계의 본질"}},"next":null},"pageContext":{"id":"6022f7d0-915e-52af-8a3d-869d94532557","series":null,"previousPostId":"3c1cc0a1-e646-5b0c-a212-7785bb4bb6e6","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}